{"version":3,"sources":["Components/Searchbar/Searchbar.js","Components/ImageGallery/ImageGallery.js","Components/ImageGalleryItem/ImageGalleryItem.js","service/pixabay.js","Components/Button/Button.js","Components/Modal/Modal.js","Components/pixabayGallery/ImagesList.js","App.js","index.js"],"names":["Searchbar","getSearchValue","useState","searchValue","setSearchValue","className","onSubmit","e","preventDefault","console","log","type","autoComplete","autoFocus","placeholder","onChange","target","value","ImageGallery","children","ImageGalleryItem","searchResults","openModal","map","id","webformatURL","tags","onClick","src","alt","propType","PropTypes","arrayOf","string","isRequired","number","func","PixabayFetch","BASE_URL","API_KEY","this","_searchQuery","_page","perPage","urlWithKey","a","searchQuery","page","params","url","axios","get","result","data","hits","Button","modalRoot","document","querySelector","Modal","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","createPortal","event","currentTarget","newPixabayFetch","ImagesList","setSearchResults","status","setStatus","largeImageId","setLargeImageId","isModalOpen","setIsModalOpen","toast","info","autoClose","position","resetPage","searchPhotos","then","catch","err","warn","findImg","find","paramLoadMore","length","color","height","width","timeout","Number","prev","scrollTo","top","documentElement","scrollHeight","behavior","largeImageURL","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.db9599b3.chunk.js","sourcesContent":["import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nexport default function Searchbar({ getSearchValue }) {\r\n  const [searchValue, setSearchValue] = useState('');\r\n\r\n  const handleSearchSubmit = e => {\r\n    e.preventDefault();\r\n    console.log('Before fetch:', searchValue);\r\n    getSearchValue(searchValue);\r\n  };\r\n\r\n  const handleSearchChange = e => {\r\n    setSearchValue(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form onSubmit={handleSearchSubmit} className=\"SearchForm\">\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className=\"SearchForm-input\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          onChange={handleSearchChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\nSearchbar.propTypes = {\r\n  getSearchValue: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGallery = ({ children }) => {\r\n  return <ul className=\"ImageGallery\">{children}</ul>;\r\n};\r\nexport default ImageGallery;\r\n\r\nImageGallery.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ searchResults, openModal }) => {\r\n  return (\r\n    <>\r\n      {searchResults.map(({ id, webformatURL, tags }) => (\r\n        <li key={id} id={id} onClick={openModal} className=\"ImageGalleryItem\">\r\n          <img\r\n            src={webformatURL}\r\n            alt={tags}\r\n            className=\"ImageGalleryItem-image\"\r\n          />\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propType = {\r\n  searchResults: PropTypes.arrayOf({\r\n    webformatURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string,\r\n    id: PropTypes.number,\r\n  }),\r\n  openModal: PropTypes.func.isRequired,\r\n};\r\n","import axios from 'axios';\r\n\r\nexport class PixabayFetch {\r\n  constructor(BASE_URL, API_KEY) {\r\n    this.BASE_URL = BASE_URL;\r\n    this.API_KEY = API_KEY;\r\n    this._searchQuery = '';\r\n    this._page = 1;\r\n    this.perPage = 12;\r\n    this.urlWithKey = '';\r\n  }\r\n  get searchQuery() {\r\n    return this._searchQuery;\r\n  }\r\n  set searchQuery(value) {\r\n    return (this._searchQuery = value);\r\n  }\r\n  get page() {\r\n    return this._page;\r\n  }\r\n  set page(value) {\r\n    return (this._page += value);\r\n  }\r\n  resetPage() {\r\n    return (this._page = 1);\r\n  }\r\n  async searchPhotos() {\r\n    this.urlWithKey = this.BASE_URL + `?key=${this.API_KEY}`;\r\n    console.log(this.searchQuery, this.page);\r\n    let params = `&q=${this._searchQuery}&page=${this.page}&per_page=${this.perPage}`;\r\n    let url = this.urlWithKey + params;\r\n    try {\r\n      const result = await axios.get(url);\r\n      const data = result.data.hits;\r\n      return data;\r\n    } catch (err) {\r\n      return console.log(err);\r\n    }\r\n    //   return axios\r\n    //     .get(url)\r\n    //     .then(result => result.data)\r\n    //     .then(data => {\r\n    //       // console.log(data.hits);\r\n    //       return data.hits;\r\n    //     })\r\n    //     .catch(err => console.log(err));\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <>\r\n      <button className=\"btn-load\" type=\"button\" onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </>\r\n  );\r\n};\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './Modal.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({ children, onClose }) {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  });\r\n  const handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n  const handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      onClose();\r\n    }\r\n  };\r\n  return createPortal(\r\n    <div className=\"Overlay\" onClick={handleBackdropClick}>\r\n      <div className=\"Modal\">{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\nModal.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n};\r\n","import { useState, useEffect } from 'react';\r\n//toast\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n//loader\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport Loader from 'react-loader-spinner';\r\n//gallery ul\r\nimport ImageGallery from '../ImageGallery';\r\n//gallery li\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n//api\r\nimport { PixabayFetch } from '../../service/pixabay';\r\n//btn\r\nimport Button from '../Button';\r\n//modal\r\nimport Modal from '../Modal';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '23189092-912e167e41c5e7d499821c37e';\r\nconst newPixabayFetch = new PixabayFetch(BASE_URL, API_KEY);\r\n\r\nexport default function ImagesList({ searchValue }) {\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [status, setStatus] = useState('idle');\r\n  const [largeImageId, setLargeImageId] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!searchValue) return;\r\n    setStatus('pending');\r\n    toast.info('Enter other data or check the word for mistakes', {\r\n      autoClose: 3000,\r\n      position: 'top-center',\r\n    });\r\n\r\n    newPixabayFetch.resetPage();\r\n    newPixabayFetch.searchQuery = searchValue;\r\n    newPixabayFetch\r\n      .searchPhotos()\r\n      .then(searchResults => {\r\n        setStatus('resolved');\r\n        setSearchResults(searchResults);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        toast.warn('Uppps, error');\r\n        setStatus('rejected');\r\n      });\r\n  }, [searchValue]);\r\n  const handleClick = () => {\r\n    newPixabayFetch.page = 1;\r\n    newPixabayFetch\r\n      .searchPhotos()\r\n      .then(searchResults => {\r\n        setSearchResults(prev => [...prev, ...searchResults]);\r\n        setStatus('resolved');\r\n      })\r\n      .then(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setStatus('rejected');\r\n      });\r\n  };\r\n\r\n  const findImg = () => {\r\n    const largeImg = searchResults.find(searchResults => {\r\n      return searchResults.id === largeImageId;\r\n    });\r\n    return largeImg;\r\n  };\r\n  const openModal = e => {\r\n    setIsModalOpen(true);\r\n    setLargeImageId(Number(e.currentTarget.id));\r\n  };\r\n  const closeModal = () => setIsModalOpen(false);\r\n  const paramLoadMore = searchResults.length > 0 && searchResults.length >= 12;\r\n  if (status === 'idle') {\r\n    return (\r\n      <div className=\"container-title\">\r\n        <p>You can find any pictures, photos and images here</p>\r\n      </div>\r\n    );\r\n  }\r\n  if (status === 'pending') {\r\n    return (\r\n      <div className=\"loader\">\r\n        <Loader\r\n          type=\"MutatingDots\"\r\n          color=\"#00BFFF\"\r\n          height={100}\r\n          width={100}\r\n          timeout={3000}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  if (status === 'rejected') {\r\n    return (\r\n      <div className=\"container-title\">\r\n        <p>Uppps, error</p>\r\n      </div>\r\n    );\r\n  }\r\n  if (status === 'resolved') {\r\n    return (\r\n      <>\r\n        <ImageGallery>\r\n          {searchResults.length > 0 && (\r\n            <ImageGalleryItem\r\n              openModal={openModal}\r\n              searchResults={searchResults}\r\n            />\r\n          )}\r\n        </ImageGallery>\r\n        {paramLoadMore > 0 && <Button onClick={handleClick} />}\r\n        {searchResults.length === 0 && (\r\n          <>\r\n            <div className=\"container-title\">\r\n              <p>Sorry, we did not find this</p>\r\n            </div>\r\n            <ToastContainer />\r\n          </>\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal largeImageId={largeImageId} onClose={closeModal}>\r\n            <img src={findImg().largeImageURL} alt={findImg().tags} />\r\n          </Modal>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nImagesList.propTypes = {\r\n  searchValue: PropTypes.string.isRequired,\r\n};\r\n","import { useState } from 'react';\nimport Searchbar from './Components/Searchbar';\nimport ImagesList from './Components/pixabayGallery';\n\nexport default function App() {\n  const [searchValue, setSearchValue] = useState('');\n  const getSearchValue = searchValue => setSearchValue(searchValue);\n\n  return (\n    <div>\n      <Searchbar getSearchValue={getSearchValue} />\n      <ImagesList searchValue={searchValue} />\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}